/**
 * @file HJ24.c
 * @author your name (you@domain.com)
 * @brief 
 * @version 0.1
 * @date 2022-06-29
 * 
 * @copyright Copyright (c) 2022
 HJ24 合唱队
题目
题解(141)
讨论(328)
排行
面经new
中等  通过率：27.78%  时间限制：1秒  空间限制：32M
知识点
动态规划
队列
warning 校招时部分企业笔试将禁止编程题跳出页面，为提前适应，练习时请使用在线自测，而非本地IDE。
描述
N 位同学站成一排，音乐老师要请最少的同学出列，使得剩下的 K 位同学排成合唱队形。

设KK位同学从左到右依次编号为 1，2…，K ，他们的身高分别为T_1,T_2,…,T_KT 
1
​
 ,T 
2
​
 ,…,T 
K
​
  ，若存在i(1\leq i\leq K)i(1≤i≤K) 使得T_1<T_2<......<T_{i-1}<T_iT 
1
​
 <T 
2
​
 <......<T 
i−1
​
 <T 
i
​
  且 T_i>T_{i+1}>......>T_KT 
i
​
 >T 
i+1
​
 >......>T 
K
​
 ，则称这KK名同学排成了合唱队形。
通俗来说，能找到一个同学，他的两边的同学身高都依次严格降低的队形就是合唱队形。
例子：
123 124 125 123 121 是一个合唱队形
123 123 124 122不是合唱队形，因为前两名同学身高相等，不符合要求
123 122 121 122不是合唱队形，因为找不到一个同学，他的两侧同学身高递减。

你的任务是，已知所有N位同学的身高，计算最少需要几位同学出列，可以使得剩下的同学排成合唱队形。

注意：不允许改变队列元素的先后顺序 且 不要求最高同学左右人数必须相等

数据范围： 1 \le n \le 3000 \1≤n≤3000 

输入描述：
用例两行数据，第一行是同学的总数 N ，第二行是 N 位同学的身高，以空格隔开

输出描述：
最少需要几位同学出列

示例1
输入：
8
186 186 150 200 160 130 197 200
复制
输出：
4
复制
说明：
由于不允许改变队列元素的先后顺序，所以最终剩下的队列应该为186 200 160 130或150 200 160 130           
 */
#include <stdio.h>
#include <math.h>

int getMaxLen(int* nums, int size) {
    int dp1[3000];
    int dp2[3000];
    
    int i, j;
    dp1[0] = 1;
    dp2[size - 1] = 1;
    for (i = 1; i < size; ++i) {
        dp1[i] = 1;
        for (j = 0; j < i; ++j) {
            if (nums[j] < nums[i] && dp1[i] < dp1[j] + 1) {
                dp1[i] = dp1[j] + 1;
            }
        }
    }
    for (i = size - 2; i >=0 ; --i) {
        dp2[i] = 1;
        for (j = size - 1; j > i; --j) {
            if (nums[j] < nums[i] && dp2[i] < dp2[j] + 1) {
                dp2[i] = dp2[j] + 1;
            }
        }
    }
    
    int max = 0;
    for (i = 0; i < size; ++i) {
        if (dp1[i] + dp2[i] - 1 > max) {
            max = dp1[i] + dp2[i] - 1;
        }
    }
    return size - max;
}

int main(void) {
    // 正确282
    int nums[] = {29,275,284,448,253,338,19,646,469,541,140,188,468,282,593,356,235,620,
                    631,385,604,501,472,385,534,316,474,114,543,192,333,40,276,559,144,465,497,9,231,174,
                    98,480,622,329,300,216,512,154,6,425,28,650,296,276,607,99,336,4,115,208,499,498,279,
                    304,429,62,495,368,72,588,270,211,199,56,606,467,619,333,591,86,579,328,152,61,276,42,
                    309,151,231,412,645,188,200,516,18,366,546,138,502,265,189,20,207,218,44,162,418,232,
                    182,367,81,70,377,259,609,506,630,272,10,338,75,397,541,292,482,560,402,308,89,60,22,
                    12,521,356,77,415,586,484,208,316,17,371,637,608,5,223,332,621,591,602,446,437,250,
                    325,338,96,327,408,592,464,141,0,160,83,96,406,496,160,581,167,634,224,305,301,323,
                    422,375,171,208,573,235,601,60,288,150,66,550,458,287,446,348,592,630,32,32,633,95,
                    551,555,118,39,581,639,564,219,633,75,31,638,471,65,515,144,288,234,371,637,610,471,
                    129,326,648,380,316,496,61,331,369,292,194,628,265,552,10,154,26,378,618,297,59,641,
                    354,442,623,400,290,397,216,308,25,280,325,382,85,572,301,626,196,71,180,212,588,
                    526,557,395,546,575,535,230,447,562,456,404,321,430,15,71,147,349,342,474,370,45,
                    534,98,292,590,110,40,413,447,514,209,232,136,167,109,393,303,643,314,400,179,53,
                    24,168,418,94,246,572,238,621,249,97,430,445,118,529,405,437,369,396,338,140,419,36};
    
    int nums1[] = {16,103,132,23,211,75,155,82,32,48,79,183,13,91,51,172,109,102,189,121,12,120,116,133,79,
    120,116,208,47,110,65,187,69,143,140,173,203,35,184,49,245,50,179,63,204,34,218,11,205,100,90,19,145,203,
    203,215,72,108,58,198,95,116,125,235,156,133,220,236,125,29,235,170,130,165,155,54,127,128,204,62,59,226,
    233,245,46,3,14,108,37,94,52,97,159,190,143,67,24,204,39,222,245,233,11,80,166,39,224,12,38,13,85,21,47,25,
    180,219,140,201,11,42,110,209,77,136};
    int size = sizeof(nums1) / sizeof(int);
    // scanf("%d", &size);
    // int nums[3000];
    // int i;
    // for (i = 0; i < size; ++i) {
    //     scanf("%d", &nums[i]);
    // }
    // getchar();
    printf("size = %d\n", size);
    printf("%d\n", getMaxLen(nums, size));
    return 0;
}